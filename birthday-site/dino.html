<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dino Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
      font-family: 'Press Start 2P', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .game-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      height: 600px;
      background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 50%, #F4E7C5 50%, #F4E7C5 100%);
      border: 5px solid #333;
      overflow: hidden;
    }

    .game-title {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      color: #FF6B6B;
      text-shadow: 3px 3px 0px #333, 6px 6px 0px rgba(0,0,0,0.2);
      z-index: 100;
      white-space: nowrap;
      animation: bounceIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
    }

    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -200%);
        font-size: 4rem;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%);
        font-size: 2rem;
      }
    }

    .title-move-up {
      animation: moveToTop 0.8s ease-out forwards !important;
    }

    @keyframes moveToTop {
      0% {
        transform: translate(-50%, -50%);
        font-size: 2rem;
      }
      100% {
        transform: translate(-50%, -480px);
        font-size: 1.2rem;
      }
    }

    #gameCanvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 50%, #F4E7C5 50%, #F4E7C5 100%);
    }

    .game-over-screen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 200;
      display: none;
    }

    .game-over-message {
      font-size: 1.5rem;
      color: #FF6B6B;
      text-shadow: 3px 3px 0px #333, 6px 6px 0px rgba(0,0,0,0.2);
      margin-bottom: 30px;
      white-space: nowrap;
      animation: bounceMessage 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes bounceMessage {
      0% {
        opacity: 0;
        transform: translateY(-100px);
        font-size: 3rem;
      }
      60% {
        opacity: 1;
      }
      100% {
        opacity: 1;
        transform: translateY(0);
        font-size: 1.5rem;
      }
    }

    .score-display {
      font-size: 1.2rem;
      color: #333;
      text-shadow: 2px 2px 0px #fff;
      margin-bottom: 20px;
    }

    button {
      font-family: 'Press Start 2P', cursive;
      background: #FFD700;
      border: 3px solid #333;
      padding: 15px 30px;
      font-size: 1rem;
      cursor: pointer;
      color: #333;
      transition: all 0.1s;
      box-shadow: 4px 4px 0px #333;
    }

    button:hover {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0px #333;
    }

    button:active {
      transform: translate(4px, 4px);
      box-shadow: 0px 0px 0px #333;
    }

    .score-counter {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.2rem;
      color: #333;
      text-shadow: 2px 2px 0px #FFD700;
      z-index: 50;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="score-counter">
      SCORE: <span id="score">0</span>/18
    </div>
    <div class="game-title" id="gameTitle">MAKE A SCORE OF 18!</div>
    <canvas id="gameCanvas"></canvas>
    <div class="game-over-screen" id="gameOverScreen">
      <div class="game-over-message" id="gameOverMessage"></div>
      <div class="score-display">FINAL SCORE: <span id="finalScore">0</span></div>
      <button id="restartBtn">RESTART</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const gameTitle = document.getElementById('gameTitle');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const gameOverMessage = document.getElementById('gameOverMessage');
    const scoreCounter = document.getElementById('score');
    const finalScore = document.getElementById('finalScore');
    const restartBtn = document.getElementById('restartBtn');

    canvas.width = 800;
    canvas.height = 600;

    let gameStarted = false;
    let gameOver = false;
    let score = 0;

    // Dino properties
    const dino = {
      x: 50,
      y: canvas.height - 120,
      width: 40,
      height: 40,
      velocityY: 0,
      jumping: false,
      color: '#228B22'
    };

    // Cacti array
    let cacti = [];
    let cactusSpawnRate = 150;
    let frameCounter = 0;

    // Gravity
    const gravity = 0.6;
    const jumpPower = 12;

    function drawDino() {
      ctx.fillStyle = dino.color;
      ctx.fillRect(dino.x, dino.y, dino.width, dino.height);
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 2;
      ctx.strokeRect(dino.x, dino.y, dino.width, dino.height);
    }

    function drawCactus(cactus) {
      ctx.fillStyle = '#0a7f0a';
      ctx.fillRect(cactus.x, cactus.y, cactus.width, cactus.height);
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 2;
      ctx.strokeRect(cactus.x, cactus.y, cactus.width, cactus.height);
    }

    function drawGround() {
      ctx.fillStyle = '#F4E7C5';
      ctx.fillRect(0, canvas.height / 2, canvas.width, canvas.height / 2);
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 2;
      ctx.strokeRect(0, canvas.height / 2, canvas.width, canvas.height / 2);
    }

    function spawnCactus() {
      const cactus = {
        x: canvas.width,
        y: canvas.height - 80,
        width: 30,
        height: 50,
        velocity: -6,
        scored: false
      };
      cacti.push(cactus);
    }

    function jump() {
      if (!dino.jumping && gameStarted) {
        dino.velocityY = jumpPower;
        dino.jumping = true;
      }
    }

    function checkCollision(dino, cactus) {
      return dino.x < cactus.x + cactus.width &&
             dino.x + dino.width > cactus.x &&
             dino.y < cactus.y + cactus.height &&
             dino.y + dino.height > cactus.y;
    }

    function update() {
      if (!gameStarted || gameOver) return;

      // Apply gravity
      dino.velocityY += gravity;
      dino.y += dino.velocityY;

      // Ground collision
      const groundY = canvas.height - 120;
      if (dino.y >= groundY) {
        dino.y = groundY;
        dino.velocityY = 0;
        dino.jumping = false;
      }

      // Update cacti
      for (let i = cacti.length - 1; i >= 0; i--) {
        cacti[i].x += cacti[i].velocity;

        // Check collision
        if (checkCollision(dino, cacti[i])) {
          endGame();
          return;
        }

        // Score on passing cactus
        if (cacti[i].x + cacti[i].width < dino.x && !cacti[i].scored) {
          cacti[i].scored = true;
          score++;
          scoreCounter.textContent = score;
        }

        // Remove off-screen cacti
        if (cacti[i].x < -50) {
          cacti.splice(i, 1);
        }
      }

      // Spawn cacti
      frameCounter++;
      if (frameCounter > cactusSpawnRate) {
        spawnCactus();
        frameCounter = 0;
        cactusSpawnRate = Math.max(80, cactusSpawnRate - 2);
      }
    }

    function draw() {
      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw background and ground
      ctx.fillStyle = '#87CEEB';
      ctx.fillRect(0, 0, canvas.width, canvas.height / 2);
      drawGround();

      // Draw game elements
      drawDino();
      cacti.forEach(drawCactus);
    }

    function startGame() {
      gameTitle.classList.add('title-move-up');
      setTimeout(() => {
        gameStarted = true;
        gameTitle.style.pointerEvents = 'none';
      }, 800);
    }

    function endGame() {
      gameOver = true;
      gameStarted = false;
      gameOverScreen.style.display = 'block';
      finalScore.textContent = score;

      if (score < 18) {
        gameOverMessage.textContent = "CMON YOU CAN'T LIE";
      } else if (score > 18) {
        gameOverMessage.textContent = "NAH I DON'T BELIEVE YOU";
      } else if (score === 18) {
        gameOverMessage.textContent = "YOU DID IT!";
        // Play bomb video
        setTimeout(() => {
          window.location.href = "bomb.html";
        }, 2000);
      }
    }

    function restartGame() {
      score = 0;
      gameStarted = false;
      gameOver = false;
      dino.y = canvas.height - 120;
      dino.velocityY = 0;
      dino.jumping = false;
      cacti = [];
      frameCounter = 0;
      cactusSpawnRate = 150;
      scoreCounter.textContent = '0';
      gameOverScreen.style.display = 'none';
      gameTitle.classList.remove('title-move-up');
      gameTitle.style.animation = 'none';
      setTimeout(() => {
        gameTitle.style.animation = 'bounceIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards';
      }, 10);
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Event listeners
    // Spacebar support (use code for reliability)
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        if (!gameStarted) return; // space only jumps once started
        jump();
      }
    });

    // Click / touch support on canvas
    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      // If game not started, only start when clicking the dino area
      if (!gameStarted && !gameOver) {
        if (x >= dino.x && x <= dino.x + dino.width && y >= dino.y && y <= dino.y + dino.height) {
          startGame();
        }
        return;
      }
      if (gameStarted && !gameOver) jump();
    });

    // Touch support for mobile devices
    canvas.addEventListener('touchstart', (e) => {
      e.preventDefault();
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      const x = touch.clientX - rect.left;
      const y = touch.clientY - rect.top;
      if (!gameStarted && !gameOver) {
        if (x >= dino.x && x <= dino.x + dino.width && y >= dino.y && y <= dino.y + dino.height) {
          startGame();
        }
        return;
      }
      if (gameStarted && !gameOver) jump();
    }, { passive: false });

    // Restart button - reset and animate title back
    restartBtn.addEventListener('click', () => {
      restartGame();
      // auto-start if user wants: leave paused so they can click dino
    });

    // Start game loop
    gameLoop();
  </script>
</body>
</html>
